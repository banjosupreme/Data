
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="wally.css">
    <script type = "text/javascript" src ="d3/d3.js"></script>
</head>
<body>
    <script type = "text/javascript">
    
    var min = function(a, b)
    {
        return a < b ? a: b
    }
        
    var households = [[4,10.8,17.3,24.2,26.4,17.2],[4.2,11.1,17.6,24.5,26.3,16.3],[4.1,10.9,17.5,24.5,26.4,16.6],[4.1,10.8,17.4,24.5,26.7,16.6],[4.1,10.6,17.3,24.5,26.8,16.7],[4.1,10.4,17,24.5,26.9,17],[4.2,10.4,17,24.5,27,16.9],[4.3,10.6,17,24.6,27,16.5],[4.3,10.4,17,24.7,27.1,16.5],[4.3,10.3,17,24.7,27.1,16.6],[4.2,10.2,16.9,24.7,27.2,16.8],[4.2,10.2,16.8,24.7,27.3,16.8],[4.1,10.2,16.8,24.6,27.3,16.9],[4.2,10.2,16.8,24.7,27.6,16.5],[4.1,10.1,16.7,24.8,27.8,16.5],[4,10,16.5,24.5,28,17],[4,9.9,16.4,24.6,28.1,17],[4,9.9,16.3,24.6,28.1,17.1],[3.9,9.8,16.2,24.4,28,17.6],[3.8,9.7,16.2,24.3,28.1,18],[3.8,9.6,16.1,24.3,28,18.2],[3.8,9.6,16,24.2,28,18.3],[3.8,9.5,15.8,24,27.9,18.9],[3.8,9.6,15.9,24,28.1,18.5],[3.8,9.6,15.9,24.2,28.4,18.1],[3.8,9.4,15.8,24.2,28.3,18.6],[3.6,9,15.1,23.5,27.9,21],[3.6,8.9,15,23.4,27.9,21.2],[3.7,9.1,15.2,23.3,27.7,21],[3.6,9,15.1,23.3,27.6,21.4],[3.6,8.9,15,23.2,27.7,21.7],[3.6,9,15,23.2,27.8,21.4],[3.6,8.9,14.9,23.2,27.9,21.5],[3.6,8.9,14.8,23,27.7,22.1],[3.5,8.7,14.6,23,27.7,22.4],[3.5,8.8,14.8,23.3,28,21.7],[3.4,8.7,14.8,23.4,28.4,21.4],[3.4,8.7,14.7,23.2,28.3,21.8],[3.4,8.6,14.6,23,28.2,22.2],[3.4,8.6,14.5,22.9,28.2,22.3],[3.4,8.7,14.8,23.4,28.5,21.2],[3.4,8.6,14.7,23.3,28.5,21.5],[3.4,8.6,14.6,23.2,28.6,21.7],[3.3,8.5,14.6,23.4,29,21.3],[3.2,8.4,14.3,23,28.8,22.3],[3.2,8.3,14.4,23,28.7,22.3]];
    var families = [[5,11.9,17,23.1,25.5,17.5],[4.9,12.1,17.3,23.2,25.3,17.1],[4.5,11.9,17.3,23.5,25.8,16.9],[4.5,12,17.4,23.4,25.4,17.3],[5,12.4,17.6,23.4,24.8,16.8],[4.9,12.3,17.4,23.4,24.5,17.4],[4.7,12.5,18,23.9,25.2,15.7],[4.5,12.1,17.7,23.9,25.5,16.3],[4.8,12.3,17.8,23.7,24.9,16.4],[5,12.5,17.9,23.7,24.9,16.1],[5.1,12.7,18.1,23.8,24.8,15.6],[5,12.5,18,23.9,25.2,15.4],[4.9,12.3,17.9,23.8,25.2,15.9],[4.8,12.2,17.8,24,25.4,15.9],[4.7,11.9,17.5,23.8,25.6,16.6],[5,12.1,17.6,24,25.6,15.7],[5,12.1,17.7,24,25.4,15.8],[5.1,12,17.7,24,25.3,15.9],[5.2,12.2,17.8,23.9,25.4,15.5],[5.6,12.4,17.8,23.8,24.9,15.6],[5.4,12.2,17.5,23.5,25,16.4],[5.6,12.4,17.7,23.7,24.9,15.6],[5.6,12.4,17.7,23.7,25,15.6],[5.4,12.2,17.6,23.8,25.3,15.6],[5.5,12,17.6,23.8,25.4,15.7],[5.5,11.9,17.5,23.9,25.5,15.9],[5.5,11.9,17.5,24,25.6,15.5],[5.7,12,17.6,24.1,25.8,14.8],[5.6,11.9,17.7,24.2,25.8,14.9],[5.6,11.9,17.7,24.2,25.8,14.9],[5.5,11.7,17.6,24.3,26,14.9],[5.4,11.7,17.6,24.2,26,15.1],[5.4,11.6,17.5,24.1,26.1,15.3],[5.3,11.6,17.6,24.4,26.5,14.6],[5.3,11.4,17.5,24.6,26.8,14.4],[5,11.3,17.2,24.4,26.9,15.3],[4.9,11.2,17.2,24.5,27.1,15.3],[4.8,11.1,17.1,24.5,27.1,15.4],[4.8,11,16.9,24.3,27,16.1],[4.7,10.9,16.9,24.1,26.9,16.5],[4.6,10.7,16.8,24,26.6,17.2],[4.6,10.7,16.7,24,26.8,17.2],[4.6,10.6,16.5,23.7,26.7,17.9],[4.6,10.8,16.6,23.8,26.9,17.4],[4.5,10.7,16.6,24.1,27.1,17.1],[4.3,10.5,16.5,24,27.1,17.6],[4.1,9.9,15.7,23.3,26.7,20.3],[4.2,10,15.7,23.3,26.8,20.1],[4.4,10.1,15.8,23.2,26.5,20],[4.2,10,15.8,23.1,26.5,20.3],[4.2,9.9,15.7,23,26.5,20.7],[4.2,9.9,15.7,23,26.6,20.7],[4.3,9.9,15.6,23,26.9,20.3],[4.3,9.8,15.4,22.7,26.6,21.1],[4.2,9.7,15.4,22.9,26.7,21],[4.2,9.7,15.5,23,26.8,20.8],[4.1,9.6,15.5,23.2,27.1,20.5],[4,9.6,15.4,23,27,20.9],[4,9.6,15.3,22.9,27,21.1],[4,9.5,15.1,22.9,27,21.5],[4.1,9.7,15.6,23.3,27.2,20.1],[4,9.6,15.5,23.1,27.3,20.5],[3.9,9.4,15.3,23.2,27.5,20.7],[3.8,9.5,15.4,23.5,27.8,20],[3.8,9.3,15.1,23,27.6,21.3],[3.8,9.2,15.1,23,27.6,21.3]];

    var fStart = 1947;
    var hStart = 1967;
    var fYear, hYear; 

    var y =       [20, 41,62,83,99,105];
    var heights = [20,20,20,20,15,5];
    var x = 0;
     
    var fData = families[0];
    var hData = households[0];
    
    var lm = Math.min(0.08*window.innerWidth,100);
    var plotw = 0.45*window.innerWidth;
    var ploth = 0.45*window.innerHeight;
    
    
    var fplot = d3.select("body").append("svg").attr("width", plotw).attr("height", ploth);
    
    var axscale = d3.scale.linear().domain([0,4.5]).range([0,plotw-100]);    
    var ayscale = d3.scale.linear().domain([0,105]).range([0,ploth]);
    
    var fYear = 1947;
    
    fplot.selectAll("rect")
        .data(families[fYear-fStart])
        .enter()
        .append("rect")
        .attr("y", function(input, i){ console.log(ploth - ayscale(y[i])); console.log("***"); return ploth - ayscale(y[i]);})
        .attr("height", function(input, i){return ayscale(heights[i]);})
        .attr("x", lm)
        .attr("width", function(input, i){return axscale(input/heights[i]);})
        .attr("fill", "#1f77b4")
        .attr("fill-opacity", 0.8)

        
        
        
    var hplot = d3.select("body").append("svg").attr("width", plotw).attr("height", ploth);
    
    var axscale = d3.scale.linear().domain([0,4.5]).range([0,plotw-100]);    
    var ayscale = d3.scale.linear().domain([0,105]).range([0,ploth]);
    
    
    
    var hYear = 1967;
    
    hplot.selectAll("rect")
        .data(households[hYear-hStart])
        .enter()
        .append("rect")
        .attr("y", function(input, i){ console.log(ploth - ayscale(y[i])); console.log("***"); return ploth - ayscale(y[i]);})
        .attr("height", function(input, i){return ayscale(heights[i]);})
        .attr("x", lm)
        .attr("width", function(input, i){return axscale(input/heights[i]);})
        .attr("fill", "#1f77b4")
        .attr("fill-opacity", 0.8)



    var plotYear = function()
     {
     
        fYear += 1;
        if (fYear == 2013)
        {
            animYear = fStart;
        }     

         fplot.selectAll("rect")
            .data(families[fYear-fStart])
            .transition()
            .attr("y", function(input, i){return ploth - ayscale(y[i]);})
            .attr("height", function(input, i){return ayscale(heights[i]);})
            .attr("x", lm)
            .attr("width", function(input, i){return axscale(input/heights[i]);})
            .attr("fill", "#1f77b4")
            .attr("fill-opacity", 0.8);
             
     } 
     
     var plotYearh = function()
     {
     
        hYear += 1;
        if (hYear == 2013)
        {
            hYear = hStart;
        }     

         hplot.selectAll("rect")
            .data(households[hYear-hStart])
            .transition()
            .attr("y", function(input, i){return ploth - ayscale(y[i]);})
            .attr("height", function(input, i){return ayscale(heights[i]);})
            .attr("x", lm)
            .attr("width", function(input, i){return axscale(input/heights[i]);})
            .attr("fill", "#1f77b4")
            .attr("fill-opacity", 0.8);
             
     } 
       
     setInterval(plotYear, 800);
     setInterval(plotYearh, 800);
     
          
    </script>

</body>
</html>
